<?xml version="1.0" encoding="utf-8"?>
<openerp>
	<data>
	    <record id="openstc_patrimoine_equipment_form" model="ir.ui.view">
	        <field name="name">openstc.patrimoine.equipment.form</field>
            <field name="model">openstc.equipment</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
            	<form>
	            	<notebook>
	            	    <page string="General">
	            	        <field name="product_image" colspan="1" widget="image" nolabel="1"/>
		            	    <group col="4" colspan="3">    
		            	        <field name="name"/>
					           	<field name="categ_id"/>
					           	<field name="service"/>
					           	<field name="manager_id"/>
		            	        <field name="marque"/>
		            	        <field name="year"/>
		            	        <field name="purchase_price"/>
		            	        <field name="list_price"/>
		            	        <field name="length_amort"/>
		            		</group>
		            		<group colspan="2" col="2">
			            		<field name="openstc_reservable"/>
			            		<field name="openstc_maintenance"/>
			            	</group>
            		    </page>
	            	    <page string="Vehicule">
	            	        <field name="cv"/>
	            	        <field name="km"/>
	            	        <field name="time"/>
	            	        <field name="immat"/>
	            	    </page>
	            	</notebook>
            	</form>
            </field>
	    </record>
	    
	    <record id="openstc_patrimoine_equipment_tree" model="ir.ui.view">
	        <field name="name">openstc.patrimoine.equipment.tree</field>
            <field name="model">openstc.equipment</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
        		<tree>
        		   <field name="name"/>
        		   <field name="service"/>
        		   <field name="marque"/>
        		   <field name="manager_id"/>
        		   <field name="qty_available"/>
        		</tree>
        	</field>
	    </record>
	    
	    <record id="openstc_patrimoine_site_tree" model="ir.ui.view">
	        <field name="name">openstc.patrimoine.site.tree</field>
            <field name="model">openstc.patrimoine.site</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
        		<tree>
        		   <field name="name"/>
        		   <field name="service_site_id"/>
        		   <field name="manager_id"/>
        		   <field name="categ_id"/>
        		   <field name="site_parent_id"/>
        		</tree>
        	</field>
	    </record>
	    
	    <record id="openstc_patrimoine_site_form" model="ir.ui.view">
	        <field name="name">openstc.patrimoine.site.form</field>
            <field name="model">openstc.patrimoine.site</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
            	<form>
            	    <field name="product_image" widget="image" nolabel="1"/>
            	    <group col="4" colspan="3">
	           	        <field name="name"/> <!-- product.product -->
			           	<field name="categ_id"/> <!-- product.product -->
			           	<field name="service_site_id"/>
			           	<field name="site_parent_id"/>
			           	<field name="openstc_reservable"/>
			           	<field name="openstc_maintenance"/>
		           	</group>
	            	<notebook colspan="4">
	            	    <page string="Bâtiment">
            		    	<group col="4" colspan="4">
	            		    	<group string="Infos Générales" colspan="4" col="6">
	            		    	    <field name="manager_id"/>
	            		    	    <field name="sdo"/>
		            		    	<field name="shon"/>
		            		    	<field name="effectif_personnel"/>
		            		    	<field name="time_openning"/>
		            		    	<group col="2" colspan="2">
		            		    	    <field name="frequentation_an"/>
		            		    		<field name="frequentation_max"/>
		            		    	</group>
		            		    </group>
	            		    	<group colspan="4" col="6" string="Infos Techniques">
		            		    	<field name="surface"/>
		            		    	<field name="floor_nb"/>
		            		    	<field name="built_year"/>
		            		    	<field name="mh_ismh_classification"/>
		            		    	<field name="erp_classification"/>
		            		    	<field name="security_com"/>
		            		    	<field name="build_type"/>
		            		    	<field name="luminaire_type"/>
		            		    	<newline/>
		            		    	<field name="floor_nature"/>
		            		    	<field name="wall_revetment"/>
	            		    	</group>
							</group>            		    	
            		    </page>
            		    <page string="Terrain">
	            	    	<group col="4" colspan="4">
	            	    	    <field name="manager_id"/>
		            	    	<field name="surface"/>
		            	    	<field name="lenght"/>
		            	    	<field name="width"/>
		            	    	<field name="build_surface"/>
		            	    	<!-- Ref Cadastale ? -->
		            	    </group>
	            	    </page>
            		    <page string="Voirie">
            		        <group col="4" colspan="4">
					           	<field name="revetment_type"/>
					           	<field name="luminaire_type"/>
				           	</group>
            		    </page>
            		    
	            	</notebook>
            	</form>
            </field>
	    </record>
	    
	    
	    <record id="openstc_patrimoine_contract_tree" model="ir.ui.view">
	        <field name="name">openstc.patrimoine.contract.tree</field>
            <field name="model">openstc.patrimoine.contract</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
        		<tree>
        		    <field name="sequence"/>
        		   <field name="name"/>
        		   <field name="patrimoine_id"/>
        		   <field name="supplier_id"/>
        		   <field name="date_start_order"/>
        		   <field name="date_end_order"/>
        		</tree>
        	</field>
	    </record>
	    
	    <record id="openstc_patrimoine_contract_form" model="ir.ui.view">
	        <field name="name">openstc.patrimoine.contract.form</field>
            <field name="model">openstc.patrimoine.contract</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
        		<form>
        		    <notebook>
        		        <page string="General">
		        		    <group colspan="4" col="4" string="General Infos">
			        		   <field name="name"/>
			        		   <field name="sequence" required="1"/>
			        		   <field name="date_order" invisible = "1" required="1"/>
			        		   <field name="date_start_order" required="1"/>
			        		   <field name="date_end_order" required="1"/>
			        		   <field name="patrimoine_id" domain="[('openstc_maintenance','=',True)]" required="1"/>
		        		   	</group>
							<group colspan="4" col="4" string="Intervenant">
								<field name="internal_inter"/>
								<group colspan="2" col="2">
								    <field name="supplier_id" attrs="{'invisible':[('internal_inter','=',True)]}"/>
									<field name="technical_service_id" attrs="{'invisible':[('internal_inter','=',False)]}"/>
							   </group>
								<newline/>
								<field name="contract_line" nolabel="1" colspan="4">
									<tree string="Intervention(s) Contracted">
									    <field name="type_inter"/>
									    <field name="next_inter"/>
									    <field name="recurrence_weight"/>
									    <field name="recurrence"/>
									</tree>
								</field>
							</group>
<!-- 							<group colspan="3" col="4" string="Reccurence"> -->
<!-- 								<field name="recurrence_weight"/> -->
<!-- 								<field name="recurrence" nolabel="1" colspan="2"/> -->
<!-- 							</group> -->
<!-- 							<field name="first_inter" required="1"/> -->
<!-- 							<field name="last_inter" readonly="1"/> -->
<!-- 							<field name="next_inter"/> -->
<!-- 							<newline/> -->
							<field name="state" widget="statusbar" statusbar_visible="draft,confirm,done"/>
        					<group colspan="2" col="2">
        					    <button name="get_all_recurrences" icon="gtk-execute" type="object" string="Compute recurrence"/>
        						<button name="confirm" string="Accept contract" icon="gtk-go-forward" states="draft"/>
        					</group>
        				</page>
<!--         				<page string="Interventions generated"> -->
<!--         				    <field name="intervention_ids"/> -->
<!--         				</page> -->
        			</notebook>
        		</form>
        	</field>
	    </record>
	    
	      <record id="openstc_patrimoine_contract_line_form" model="ir.ui.view">
	        <field name="name">openstc.patrimoine.contract.line.form</field>
            <field name="model">openstc.patrimoine.contract.line</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Intervention(s) Contracted">
                    <group colspan="2" col="2">
                    	<field name="type_inter" required="1" on_change="onchange_type_inter(type_inter,parent.date_start_order, parent.date_end_order)"/>
                        <field name="start_recur" required="1"/>
	                    <field name="end_recur" required="1"/>
	                    <group colspan="2" col="3">
	                        <field name="recurrence_weight" required="1"/>
	                        <field name="recurrence" nolabel="1" required="1"/>
	           	        </group>
	                    <group colspan="2" col="4">
	                    	<field name="next_inter"/>
	                   		<field name="last_inter" readonly="1"/>
	                    </group>
	                    <newline/>
                    </group>
                    <group colspan="2"/>
                    <newline/>
                    <field name="occurrence_line" nolabel="1">
                        <tree string="Occurrence(s)">
                            <field name="date_order"/>
                            <field name="observation"/>
                            <field name="state"/>
                        </tree>
                        <form string="Occurrence(s)">
                            <field name="date_order"/>
                            <field name="observation"/>
                            <field name="state"/>
                        </form>
                    </field>
                </form>
            </field>
        </record>
	    
	    
<!-- 	     <record id="openstc_patrimoine_contract_form_inherit_type" model="ir.ui.view"> -->
<!-- 	        <field name="name">openstc.patrimoine.contract.inherit.type</field> -->
<!--             <field name="model">openstc.patrimoine.contract</field> -->
<!--             <field name="type">form</field> -->
<!--             <field name="inherit_id" ref="openstc_patrimoine_contract_form"/> -->
<!--             <field name="arch" type="xml"> -->
<!--         		<form> -->
<!--         		    <field name="type_intervention" position="after"/> -->
<!-- 	    		</form> -->
<!-- 	    	</field> -->
<!-- 	    </record> -->
	    
	     <record id="openstc_patrimoine_contract_inter_type_form" model="ir.ui.view">
	        <field name="name">openstc.patrimoine.contract.inter.type.form</field>
            <field name="model">openstc.patrimoine.contract.intervention.type</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
        		<form>
					<field name="name"/>
				</form>
	    	</field>
	    </record>
	</data>
</openerp>